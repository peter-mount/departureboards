var UI=function(){function a(){}a.urlChange=function(a){};var b=["#searchPane","#boardPane"];a.show=function(a){console.log("show",a),$.each(b,function(b,c){$(c).css({display:c===a?"block":"none"})})},a.showAbout=function(){$("#about").modal()},a.showContact=function(){$("#contactus").modal()};var c={};return a.showSearch=function(){a.urlChange("/"),a.show("#searchPane"),setTimeout(function(){$("#stations").val("").focus()},250)},a.stationSearch=function(a){c={};var b=$.map(a,function(a){return a.text=a.name+" ["+a.crs+"]",c[a.text]=a,a.text});return b},a.stationSearchOn=function(b){var d=$("#stations").val(),e=c[d];e&&e.crs&&""!==e.crs&&a.showCRS(e.crs)},a.showCRS=function(b){b=b.toUpperCase(),a.urlChange("/"+b),a.show("#boardPane")},a}();$(document).ready(function(){console.log("init"),$("#stations").typeahead({name:"search",remote:{url:"//api.area51.onl/darwin/search?term=%QUERY",dataType:"json",cache:!1,filter:UI.stationSearch}}).on("typeahead:selected",UI.stationSearchOn);for(var a=location.pathname;a.endsWith("/index.html");)a=a.substr(0,a.length-"/index.html".length);for(;a.endsWith("/");)a=a.substr(0,a.length-1);a.match("/[a-zA-Z]{3}")?UI.showCRS(a.substr(1)):UI.showSearch()});